  <!DOCTYPE html>
  <html>
  <head>
    <title></title>
    <style>
    div.google_chart svg g g g g rect { 
            stroke-width:0px; fill:red; 
            }
    </style>
        <script
  src="https://code.jquery.com/jquery-3.2.1.js"
  integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE="
  crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

  </head>
  <body>
      <div id="chart_div"></div> 
      <div id="player_chart_div"></div> 
      <button id="getLeagueData">Get data</button> 
      <input id="leagueId"></input>
  </body>
  </html>

<script>


$('#getLeagueData').on('click', function(){
    var leagueId = $('#leagueId').val()
    google.charts.load('current', {packages: ['corechart']});
    google.charts.setOnLoadCallback(drawPlayerChart);


  function drawPlayerChart() {
    var playerChart = new google.visualization.DataTable();

     var options = {
          hAxis: {
            title: 'Gameweeks',
            
          },
          vAxis: {
            title: 'Score',
            gridlines: {color:'black'}
          },
          series: {
            1: {curveType: 'function'}
          },
          'width':'100%',
          'height':1200,
          lineWidth: 1,
          legend: { textStyle: {fontSize: 12}},

        };

    var gw1 = ['Week 1'];
    var gw2 = ['Week 2'];
    var gw3 = ['3'];
    var gw4 = ['4'];
    var gw5 = ['5'];
    var gw6 = ['6'];
    var gw7 = ['7'];
    var gw8 = ['8'];
    var gw9 = ['9'];
    var gw10 = ['10'];
    var gw11= [11];
    var gw12 = [12];
    var gw13 = [13];
    var gw14 = [14];
    var gw15 = [15];
    var gw16 = [16];
    var gw17 = [17];
    var gw18 = [18];
    var gw19 = [19];
    var gw20 = [20];
    var gw21 = [21];
    var gw22 = [22];
    var gw23 = [23];
    var gw24 = [24];
    var gw25 = [25];
    var gw26 = [26];
    var gw27 = [27];
    var gw28 = [28];
    var gw29 = [29];
    var gw30 = [30];
    var gw31 = [31];
    var gw32 = [32];
    var gw33 = [33];
    var gw34 = [34];
    var gw35 = [35];
    var gw36 = [36];
    var gw37 = [37];
    var gw38 = [38];

    var playerIds = [];


      $.ajax({
        url:'https://fantasy.premierleague.com/drf/leagues-classic-standings/' + leagueId + '?phase=1', 
        success:function(data){

          //build the chart Y axes
          playerChart.addColumn('string', 'X');
          var players = data.standings.results;
          players.forEach(function(player){
            playerChart.addColumn('number', player.player_name)
            playerIds.push(player.entry);
          })
        }
      }).done(function(){

            $(this).unbind("ajaxStop");
            console.log(playerIds);

            var fish = $.each(playerIds, function(i, val){

              $.ajax({
                  url:'https://fantasy.premierleague.com/drf/entry/'+val+'/event/1/picks', 
                  success:function(data){
                    console.log(data);
                    points = data.entry_history.total_points;
                    gw1.push(points)
                    }
                  })
              $.ajax({
                  url:'https://fantasy.premierleague.com/drf/entry/'+val+'/event/2/picks', 
                  success:function(data){
                    console.log(data);
                    points = data.entry_history.total_points;
                    gw2.push(points)
                    }
                  })
              $.ajax({
                  url:'https://fantasy.premierleague.com/drf/entry/'+val+'/event/3/picks', 
                  success:function(data){
                    console.log(data);
                    points = data.entry_history.total_points;
                    gw3.push(points)
                    }
                  })
              $.ajax({
                  url:'https://fantasy.premierleague.com/drf/entry/'+val+'/event/4/picks', 
                  success:function(data){
                    console.log(data);
                    points = data.entry_history.total_points;
                    gw4.push(points)
                    }
                  })
              $.ajax({
                  url:'https://fantasy.premierleague.com/drf/entry/'+val+'/event/5/picks', 
                  success:function(data){
                    console.log(data);
                    points = data.entry_history.total_points;
                    gw5.push(points)
                    }
                  })
              $.ajax({
                  url:'https://fantasy.premierleague.com/drf/entry/'+val+'/event/6/picks', 
                  success:function(data){
                    console.log(data);
                    points = data.entry_history.total_points;
                    gw6.push(points)
                    }
                  })
              $.ajax({
                  url:'https://fantasy.premierleague.com/drf/entry/'+val+'/event/7/picks', 
                  success:function(data){
                    console.log(data);
                    points = data.entry_history.total_points;
                    gw7.push(points)
                    }
                  })
              $.ajax({
                  url:'https://fantasy.premierleague.com/drf/entry/'+val+'/event/8/picks', 
                  success:function(data){
                    console.log(data);
                    points = data.entry_history.total_points;
                    gw8.push(points)
                    }
                  })
              $.ajax({
                  url:'https://fantasy.premierleague.com/drf/entry/'+val+'/event/9/picks', 
                  success:function(data){
                    console.log(data);
                    points = data.entry_history.total_points;
                    gw9.push(points)
                    }
                  })
              $.ajax({
                  url:'https://fantasy.premierleague.com/drf/entry/'+val+'/event/10/picks', 
                  success:function(data){
                    console.log(data);
                    points = data.entry_history.total_points;
                    gw10.push(points)
                    }
                  })
            })
            
          
      })

      $(document).ajaxStop(function(){
            $(this).unbind("ajaxStop");

              // gw2 = cumulateArrays(gw1, gw2);
              // gw3 = cumulateArrays(gw2, gw3);
              // gw4 = cumulateArrays(gw3, gw4);
              // gw5 = cumulateArrays(gw4, gw5);
              // gw6 = cumulateArrays(gw5, gw6);
              // gw7 = cumulateArrays(gw6, gw7);
              // gw8 = cumulateArrays(gw7, gw8);
              // gw9 = cumulateArrays(gw8, gw9);
              // gw10 = cumulateArrays(gw9, gw10);

              console.log([gw1, gw2, gw3, gw4, gw5, gw6, gw7, gw8, gw9, gw10])

              playerChart.addRows([gw1, gw2, gw3, gw4, gw5, gw6, gw7, gw8, gw9, gw10])
              var chart = new google.visualization.LineChart(document.getElementById('player_chart_div'));
              chart.draw(playerChart, options);
            })

         
      
    } 

  //the click
})

function cumulateArrays(array1, array2){
  var sum = array1.map((a, i) => a + array2[i]);
  return sum;
}

</script>


  

  
